package dbconnecton;import org.jetbrains.annotations.NotNull;import org.slf4j.Logger;import java.sql.Connection;import java.sql.SQLException;interface ReusableConnection extends ConnectionWrapper {    /**     * Returns connection queue this ReusableConnection resides in.     * @return Connection queue reference. If {@code null}, connections are terminated instead of returning to pool.     */    @NotNull DestructibleBlockingQueue<Connection> getConnectionQueue();    static ReusableConnection create(@NotNull Connection connection,                                     @NotNull DestructibleBlockingQueue<Connection> queue, @NotNull Logger logger) {        return new ReusableConnection() {            @Override            @NotNull public DestructibleBlockingQueue<Connection> getConnectionQueue() {                return queue;            }            @Override            @NotNull public Connection toSrc() {                return connection;            }            @Override            @NotNull            public Logger getLogger() {                return logger;            }        };    }    /**     * Returns connection to the pool if the queue exists, otherwise closes it     * @throws SQLException     */    @Override    default void close() throws SQLException {        if (toSrc().isClosed()) {            throw new SQLException("Attempting to close closed connection");        }        if (toSrc().isReadOnly())            toSrc().setReadOnly(false);        if (getConnectionQueue().isDestroyed()) {            getLogger().trace("Connection {} terminating: pool closed", this);            toSrc().close();            return;        }        if (! getConnectionQueue().queue().offer(this))            throw new SQLException("Error returning connection to the pool");        getLogger().trace("Returning connection {} to the pool", this);    }    @NotNull    Logger getLogger();}